!function(){var a=window,b=document,c={},d={},e={},f={},g=1,h="prototype",i="setAttribute",j="getAttribute",k="parentElement",l="appendChild",m="removeChild",n="createElement",o="data-component-",p=o+"name",q=o+"id",r=o+"option-",s="call",t="el",u="length",v="name",w=function(){},x=[].slice,y={}.toString,z=/-(\w)/g,A=/\$\{ *(.*?) *\}/g,B=b[n]("div"),C={},D={click:!1,dblclick:!1,mousedown:!1,mouseup:!1,mousemove:!1,touchstart:!1,touchmove:!1,touchend:!1,keyup:!1,keydown:!1,error:!0,blur:!0,focus:!0,scroll:!0,submit:!0,change:!0,resize:!0},E=function(a,b){return x[s](a.querySelectorAll(b))},F=function(a,c){var d,f=[];for(c&&(a=a&&a[k]);a&&a!==b.body;)d=a[j](q),d&&f.push(e[d]),a=a[k];return f},G=function(a,c){for(;a&&a!==b.body;){if(H(a,c))return a;a=a[k]}return null},H=function(a,b){var c=a["webkit"+c]||a["moz"+c]||a["ms"+c]||a["o"+c]||a.matchesSelector||a.matches;if(c)return c[s](a,b);var d,e=a[k],f=!e;return f&&(e=B,e[l](a)),d=-1!==E(e,b).indexOf(a),f&&e[m](a),d},I=c.fromElement=function(a){if(!N(a))return null;var b=a[j](p),c=a[j](q);if(!b)return null;if(c)return e[c];if(!d[b])throw Error("No component has been registered with name "+b);return new d[b](a)},J=function(a,b){if(M(a)&&(a=[a]),!a)return this;for(var c=x[s](arguments,2),d=0,e=a[u];e>d;d++)a[d][b].apply(a[d],c);return this},K=function(a){for(var b,c,d,e={},f=a.attributes,g=f[u],h=0;g>h;h++)if(b=f[h],c=b[v],0===c.indexOf(r)){try{d=JSON.parse(b.value)}catch(i){d=b.value}c=b[v].replace(r,"").replace(z,L),e[c]=d}return e},L=function(a,b){return b.toUpperCase()},M=function(a){return a instanceof R},N=function(a){return a&&1===a.nodeType},O=function(a){return y[s](a)===y[s](y)},P=function(a){return y[s](a)===y[s]("")},Q=function(a,b){return a.replace(A,function(a,c){for(var d=c.split("."),e=b;d.length&&e;)c=d.shift(),e=e[c];return void 0!==e?e:""})},R=c.Component=function(a,b){if(a||(a=this.createRootElement()),this.options=K(a),b)for(var c in b)this.options[c]=b[c];this[t]=a,this._id=g++,a[i](p,this[v]),a[i](q,this._id),e[this._id]=this,this.init(),this.render()};R[h]={name:"",tagName:"div",template:null,init:function(){return this},render:function(){return O(this.template)&&(this[t].innerHTML=this.template(this)),P(this.template)&&(this[t].innerHTML=Q(this.template,this)),T(this[t]),this},emit:function(a,b,c){b=b||{},b.target=this,b.type=a,b.customEvent=!0,S(b,c)},appendTo:function(a){return N(a)&&N(this.el)&&(this.beforeInsert(),a[l](this[t]),this.onInsert(),this.emit("inserted")),this},beforeInsert:w,onInsert:w,remove:function(a){if(!this[t]||!this[t][k])return this;a=a||F(this[t],!0);var b=T(this[t]);return J(b,"beforeRemove"),this[t][k][m](this[t]),J(b,"onRemove"),this.emit("remove",null,a),this},beforeRemove:w,onRemove:w,destroy:function(){if(!e[this._id])return null;var a=F(this[t],!0);return this.remove(a),J(T(this[t]),"beforeDestroy"),this.emit("destroy",null,a),this[t]=null,delete e[this._id],null},beforeDestroy:w,createRootElement:function(){return b[n](this.tagName)},findAll:function(a){return this[t]?E(this[t],a):[]},find:function(a){return this[t]?this[t].querySelector(a):null},findComponent:function(a){return I(this.find("["+p+"="+a+"]"))},findAllComponents:function(a){return this.findAll("["+p+"="+a+"]").map(I)},invoke:J,setGlobalHandler:function(a,b){return f[a]=f[a]||[],f[a].push({fn:b,ctx:this}),this},releaseGlobalHandler:function(a,b){var c=f[a];return c?(f[a]=c.filter(function(a){return a.fn!==b}),this):this}};var S=c.handleEvent=function(a,c){var d,e,g,h,i,j,k,l,m=a.target,n=M(m),o=n?m[v]:null,p=a.type;for(c=x.call(c||F(n?m[t]:m,n));c.length;)if(d=c.shift(),e=d.events)for(h in e)k=h.split(":"),i=k[u]>1?k[0]:null,j=k[u]>1?k[1]:k[0],l=e[h],(j===p||C[p]===j)&&(i?n?i===o&&d[l](a):(g=G(m,i),g&&d[l](a,g)):d[l](a));var q=f[a.type]||f[C[a.type]];if(q)for(var r=0,w=q[u];w>r;r++)q[r].fn[s](q[r].ctx,a,b.body)},T=c.parse=function(a){a=N(a)?a:b.body;var c=E(a,"["+p+"]");c.unshift(a);for(var d,e=[],f=0,g=c[u];g>f;f++)d=I(c[f]),d&&e.push(d);return e};c.register=function(a,b){if(y[s](a)===y[s]({})&&(b=a,a=b[v]),!P(a)||!a)throw Error('"'+a+'" is not a valid component name');if(d[a])throw Error("A component called "+a+" already exists");b=b||{};var c=function(){R.apply(this,arguments)},e=function(){};e[h]=R[h],c[h]=new e,c[h][v]=a;for(var f in b)c[h][f]=b[f];return d[a]=c,c},c.bindEvents=function(){var a,c;for(a in D)c=-1!==["resize","scroll"].indexOf(a)?window:b.body,c.addEventListener(a,S,!!D[a])},c.init=function(a){if(a=a||{},a.eventMappings&&(C=a.eventMappings),a.additionalEvents)for(var b in a.additionalEvents)D[b]=a.additionalEvents[b];c.parse(),c.bindEvents()},a.define&&define.amd?define(function(){return c}):a.components=c}();