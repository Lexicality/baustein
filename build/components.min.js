!function(){var a=window,b=document,c={},d={},e={},f=1,g="addEventListener",h="prototype",i="setAttribute",j="getAttribute",k="parentElement",l="appendChild",m="removeChild",n="length",o="createElement",p="data-component-name",q="data-component-id",r="call",s="el",t={},u=[].slice,v={}.toString,w=b[o]("div"),x={mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup"},y=function(a,b){return u[r](a.querySelectorAll(b))},z=function(a,c){var d,f=[];for(c&&(a=a&&a[k]);a&&a!==b.body;)d=a[j](q),d&&f.push(e[d]),a=a[k];return f},A=function(a,c){for(;a&&a!==b.body;){if(B(a,c))return a;a=a[k]}return null},B=function(a,b){var c=a["webkit"+c]||a["moz"+c]||a["ms"+c]||a["o"+c]||a.matchesSelector||a.matches;if(c)return c[r](a,b);var d,e=a[k],f=!e;return f&&(e=w,e[l](a)),d=-1!==y(e,b).indexOf(a),f&&e[m](a),d},C=c.fromElement=function(a){if(!F(a))return null;var b=a[j](p),c=a[j](q);if(!b)return null;if(c)return e[c];if(!d[b])throw Error("No component has been registered with name "+b);return new d[b](a)},D=function(a,b){if(E(a)&&(a=[a]),!a)return this;for(var c=u[r](arguments,2),d=0,e=a[n];e>d;d++)a[d][b].apply(a[d],c);return this},E=function(a){return a instanceof I},F=function(a){return a&&1===a.nodeType},G=function(a){return"[object Function]"===v.call(a)},H=function(a){return"[object String]"===v.call(a)},I=c.Component=function(a,b){if(a||(a=this.createRootElement()),this.options={},b)for(var c in b)this.options[c]=b[c];this[s]=a,this._id=f++,a[i](p,this.name),a[i](q,this._id),e[this._id]=this,this.init(),this.render()};I[h]={name:"",tagName:"div",template:null,init:function(){return this},render:function(){return G(this.template)&&(this[s].innerHTML=this.template(this)),H(this.template)&&(this[s].innerHTML=this.template),L(this[s]),this},emit:function(a,b,c){b=b||{},b.target=this,b.type=a,b.customEvent=!0,J(b,c)},appendTo:function(a){return a?(E(a)&&a.appendComponent(this),F(a)&&this.appendToElement(a),this):this},appendToElement:function(a){return this[s]&&F(a)&&a[l](this[s]),this},append:function(a){return a?(E(a)&&this.appendComponent(a),F(a)&&this.appendElement(a),this):this},appendComponent:function(a){return E(a)&&a[s]&&this[s]&&(a.beforeInsert(),this[s][l](a[s]),a.onInsert()),this},appendElement:function(a){return this[s]&&F(a)&&this[s][l](a),this},beforeInsert:function(){},onInsert:function(){},remove:function(a){if(!this[s]||!this[s][k])return this;a=a||z(this[s],!0);var b=L(this[s]);return D(b,"beforeRemove"),this[s][k][m](this[s]),D(b,"onRemove"),this.emit("remove",null,a),this},beforeRemove:function(){},onRemove:function(){},destroy:function(){if(!e[this._id])return null;var a=z(this[s],!0);return this.remove(a),D(L(this[s]),"beforeDestroy"),this.emit("destroy",null,a),this[s]=null,delete e[this._id],null},beforeDestroy:function(){},createRootElement:function(){return b[o](this.tagName)},findAll:function(a){return this[s]?y(this[s],a):[]},find:function(a){return this[s]?this[s].querySelector(a):null},findComponent:function(a){return C(this.find("["+p+"="+a+"]"))},findAllComponents:function(a){return this.findAll("["+p+"="+a+"]").map(C)},invoke:D,setGlobalHandler:function(a,b){return t[a]=t[a]||[],t[a].push({fn:b,ctx:this}),this},releaseGlobalHandler:function(a,b){var c=t[a];return c?(t[a]=c.filter(function(a){return a.fn!==b}),this):this}};var J=c.handleEvent=function(a,b){var c,d,e,f,g,h,i,j,k=a.target,l=E(k),m=l?k.name:null,o=a.type;for(b=u.call(b||z(l?k[s]:k,l));b.length;)if(c=b.shift(),d=c.events)for(f in d)i=f.split(":"),g=i[n]>1?i[0]:null,h=i[n]>1?i[1]:i[0],j=d[f],(h===o||x[o]===h)&&(g?l?g===m&&c[j](a):(e=A(k,g),e&&c[j](a,e)):c[j](a));K(a)},K=function(a){var c=t[a.type]||t[x[a.type]];if(c)for(var d=0,e=c[e];e>d;d++)c[d].fn[r](c[d].ctx,a,b.body)},L=c.parse=function(a){if(a=1===arguments[n]?a:b.body,!a)return[];C(a);for(var c,d=y(a,"["+p+"]"),e=[],f=0,g=d[n];g>f;f++)c=C(d[f]),c&&e.push(c);return e};c.register=function(a,b){if("[object Object]"===v[r](a)&&(b=a,a=b.name),d[a])throw Error("A component called "+a+" already exists");b=b||{};var c=function(){I.apply(this,arguments)},e=function(){};e[h]=I[h],c[h]=new e,c[h].name=a;for(var f in b)c[h][f]=b[f];return d[a]=c,c},c.bindEvents=function(){["click","dblclick","mousedown","mouseup","mousemove","touchstart","touchmove","touchend","keyup","keydown","blur","focus","submit","change"].forEach(function(a,c){b.body[g](a,J,c>8)})},a.define&&define.amd?define(function(){return c}):a.components=c}();